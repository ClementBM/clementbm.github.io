---
layout: post
title:  "Compute simple corpus descriptive metrics"
excerpt: "Get a quick overview of a corpus with some basic descriptive metrics with the help of NLTK"
date:   2022-07-06
categories: [theory]
tags: [NLTK, NLP, tokenizer, metrics]
---


![Multiple fruits](/assets/2022-07-06/pexels-trang-doan-1128678.jpg)

# Descriptive metrics

We define a corpus $$\mathcal{C} = {d_i} $$ as a list of document. The number of document can be seen as the cardinality of the corpus $$\vert \mathcal{C} \vert = N$$.

In this case, each document has only one text field, the title.

Each document has a set of text attribute/field. Each field is indexed with j from 1 to M, such $$a_{ij}$$ is the j$$^{th}$$ field of the i$$^{th}$$ document.

We define a tokenizer function $$ f_{tokenizer} $$ as $$ f_{tokenizer} : a_{ij} \rightarrow [t_1, ..., t_k, ... , t_L] $$, with $${t_k}$$ the list of tokens corresponding to the $$ a_{ij} $$ field.

We define $$ \mathcal{T} = t_{ijk} $$ the token k for the field j of the ith document.
We can also note $$ \mathcal{T}_j = t_{ik} $$ the list of token for a given field j.

We define the dictionary $$ \mathcal{D} = { t_i } $$ given a tokenizer function $$ f_{tokenizer} $$, as the list of unique tokens generated by a tokenizer on a given corpus.


| Metric                | Formula                                                                                                                             | Title   | Tokenizer sensitive |
|:----------------------|:------------------------------------------------------------------------------------------------------------------------------------|:--------|---------------------|
| count                 | $$\vert \mathcal{O} \vert$$                                                                                                           | 500     | No
| unique count          | $$\vert \mathcal{O}_{unique} \vert$$                                                                                                  | 497     | No
| token count           | $$\vert \mathcal{T} \vert$$                                                                                                           | 2853    | Yes
| dictionary length     | $$\vert \mathcal{D} \vert$$                                                                                                           | 2195    | Yes
| lem dictionary length | $$\vert \mathcal{D}_{lemme} \vert$$                                                                                                   | 1817    | Yes
| average length        | $$\bar{M_i}$$                                                                                                                         | 49.69   | Yes
| min max length        | $$\{ min(M_i), max(M_i) \}$$                                                                                                          | (7, 81) | Yes
| median length         | $$\tilde{M_i}$$                                                                                                                       | 51      | Yes
| std length            | $$s_{M_i}$$                                                                                                                           | 19.12   | Yes
| duplicate proportion  | $$\vert \mathcal{O} \vert - \vert \mathcal{O}_{unique} \vert \over \vert \mathcal{O} \vert$$                                          | 0.006   | No
| uppercase items       | $$\vert \mathcal{O}_{upper} \vert \over \vert \mathcal{O} \vert$$                                                                     | 0.0     | No
| hapaxes               | $$\vert \mathcal{D}_{hapax} \vert \over \vert \mathcal{D} \vert$$                                                                     | 0.8378  | Yes
| in vocabulary         | $$\vert \mathcal{D}_{lemme} \cap \mathcal{D}_{NLTK} \vert \over \vert \mathcal{D}_{lemme} \vert$$                                     | 0.7386  | Yes
| out of vocabulary     | $$\vert \mathcal{D}_{lemme} \vert - \vert \mathcal{D}_{lemme} \cap \mathcal{D}_{NLTK} \vert \over \vert \mathcal{D}_{lemme} \vert$$   | 0.2334  | Yes
| lexical diversity     | $$\vert \mathcal{D} \vert \over \vert \mathcal{T} \vert$$                                                                             | 0.7694  | Yes
| numerical frequency   | $$\vert \mathcal{T}_{numerical} \vert \over \vert \mathcal{T} \vert$$                                                                 | 0.0315  | Yes
| numerical proportion  | $$\vert \mathcal{D}_{numerical} \vert \over \vert \mathcal{D}_{lemme} \vert$$                                                         | 0.0281  | Yes

**Tokenizer specifications**

| Step | Description |
|--|--|
| Replace html entities | Remove html entities like &gt; or &nbsp; and convert them to their corresponding unicode character. |
| Find word according to regex patterns | |
| Filter (remove) words that are punctuation | remove punctuation from `string.punctuation` **'!"#$%&\'()*+,-./:;<=>?@[\\]^_`{\|}~'** and **——–’‘“”×** |


## Create a simple Corpus Metrics class

```python
"n" for nouns
"v" for verbs
"a" for adjectives
"r" for adverbs
"s" for satellite adjectives
```
